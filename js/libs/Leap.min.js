var Leap={APIVersion:"0.7.2"};Leap.Calibrate=function(e){this.E=e,this.g=[];var t=this;this.P=document.createElement("div"),this.P.style.cssText=this.f+this.u,this.P.innerText="1",this.P.onclick=function(){t.r()},document.body.appendChild(this.P)},Leap.Calibrate.prototype={f:"width: 20px; height: 20px; padding: 10px; margin: -20px; position: fixed; text-align: center; background-color: #c3cccc; color: #ffffff; cursor: pointer; ",u:"left: 25%; top: 50%;",v:"left: 25%; top: 25%;",w:"left: 75%; top: 50%;",r:function(){var e=this.E.frame().pointables();if(e.count()==1){var t=this;this.g[0]=e[0].tipPosition(),this.P.style.cssText=this.f+this.v,this.P.innerText="2",this.P.onclick=function(){t.p()}}},p:function(){var e=this.E.frame().pointables();if(e.count()==1){var t=this;this.g[1]=e[0].tipPosition(),this.P.style.cssText=this.f+this.w,this.P.innerText="3",this.P.onclick=function(){t.q()}}},q:function(){var e=this.E.frame().pointables();if(e.count()==1){var t=this;this.g[2]=e[0].tipPosition(),document.body.removeChild(this.P),delete this.P,this.onComplete(new Leap.Screen(this.g))}},onComplete:function(e){}},Leap.Controller=function(e){this.b=[],this.F={},this.s=0,this.U=1024,this.H=0,this.AB=new Leap.ScreenList;for(var t=0;t<this.U;t++)this.b[t]=Leap.Frame.invalid();typeof WebSocket=="undefined"&&typeof MozWebSocket!="undefined"&&(WebSocket=MozWebSocket),typeof WebSocket!="undefined"&&(this.T=new WebSocket(e),this.T.E=this,this.T.onmessage=function(e){this.E.n(e)},this.T.onopen=function(e){for(t in this.E.F)this.E.F[t].onConnect(this.E)},this.T.onclose=function(e){for(t in this.E.F)this.E.F[t].onDisconnect(this.E)},this.T.onerror=function(e){this.onclose(e)})},Leap.Controller.prototype={isConnected:function(){return this.T.connected},frame:function(e){return e==null||e==0?this.b[this.H]:e>this.U-1?Leap.Frame.invalid():(e=this.H-e,e<0&&(e+=this.U),this.b[e])},addListener:function(e){e.I=this.s++,this.F[e.I]=e,e.onInit(this)},removeListener:function(e){e.onExit(this),this.F[e.I].onExit(this),delete this.F[e.I]},config:function(){},calibratedScreens:function(){return this.AB},t:function(e){var t=JSON.parse(e.data),n=new Leap.Frame(t);this.H++,this.H==this.U&&(this.H=0),delete this.b[this.H],this.b[this.H]=n;for(index in this.F)this.F[index].onFrame(this)},n:function(e){Leap.serverVersion=JSON.parse(e.data).version,this.T.onmessage=function(e){this.E.t(e)}}},Leap.Frame=function(e){this.L=new Leap.FingerList,this.X=new Leap.ToolList,this.G=new Leap.PointableList,this.i=new Leap.HandList,this.J={},this.K={},this.D={},this.W={};if(e==null)this.I=null,this.e=null,this.B=!1,this.A=new Leap.Matrix,this.Z=null,this.C=new Leap.Vector;else{this.I=e.id,this.e=e.timestamp,this.B=!0,this.A=new Leap.Matrix(e.r),this.Z=e.s,this.C=new Leap.Vector(e.t);for(index in e.hands){var t=new Leap.Hand(e.hands[index],this);this.W[t.I]=t,this.i.push(t)}for(index in e.pointables){var n=this.W[e.pointables[index].handId];if(e.pointables[index].tool){var r=new Leap.Tool(e.pointables[index],n);this.D[r.I]=this.K[r.I]=r,this.G.push(r),this.X.push(r),n&&(n.D[r.I]=n.K[r.I]=r,n.G.push(r),n.X.push(r))}else{var r=new Leap.Finger(e.pointables[index],n);this.D[r.I]=this.J[r.I]=r,this.G.push(r),this.L.push(r),n&&(n.D[r.I]=n.J[r.I]=r,n.G.push(r),n.L.push(r))}}}},Leap.Frame.prototype={id:function(){return this.I},timestamp:function(){return this.e},rotationAngle:function(e,t){if(!this.B||!e.B)return 0;var n=this.rotationMatrix(e),r=(n.xBasis.x+n.yBasis.y+n.zBasis.z-1)*.5,i=Math.acos(r);return i===NaN?0:i},rotationAxis:function(e){if(!this.B||!e.B)return Leap.Vector.zero();var t=this.A.zBasis.y-e.A.yBasis.z,n=this.A.xBasis.z-e.A.zBasis.x,r=this.A.yBasis.x-e.A.xBasis.y,i=new Leap.Vector([t,n,r]);return i.normalize()},rotationMatrix:function(e){if(!this.B||!e.B)return Leap.Matrix.identity();var t=new Leap.Vector([this.A.xBasis.x,this.A.yBasis.x,this.A.zBasis.x]),n=new Leap.Vector([this.A.xBasis.y,this.A.yBasis.y,this.A.zBasis.y]),r=new Leap.Vector([this.A.xBasis.z,this.A.yBasis.z,this.A.zBasis.z]),i=new Leap.Matrix([t,n,r]);return e.A.multiply(i)},scaleFactor:function(e){return!this.B||!e.B?1:Math.exp(this.Z-e.Z)},translation:function(e){if(!this.valid||!e.valid)return Leap.Vector.zero();var t=this.C.x-e.C.x,n=this.C.y-e.C.y,r=this.C.z-e.C.z;return new Leap.Vector([t,n,r])},finger:function(e){return this.J[e]==null?Leap.Finger.invalid():this.L[e]},fingers:function(){return this.L},hand:function(e){return this.W[e]==null?Leap.Hand.invalid():this.W[e]},hands:function(){return this.i},pointable:function(e){return this.D[e]==null?Leap.Pointable.invalid():this.D[e]},pointables:function(){return this.G},tool:function(e){return this.K[e]==null?Leap.Tool.invalid():this.K[e]},tools:function(){return this.X},pointables:function(){return this.G},compare:function(e){return this.I==e.id},toString:function(){var e="{timestamp:"+this.e+",id:"+this.I+",hands:[";for(var t=0;t<this.i.length;t++)e+=this.i[t].toString();return e+="]}",e},isValid:function(){return this.B}},Leap.Frame.invalid=function(){return new Leap.Frame},Leap.Hand=function(e,t){this.L=new Leap.FingerList,this.X=new Leap.ToolList,this.G=new Leap.PointableList,this.J={},this.K={},this.D={},e==null?(this.d=null,this.I=null,this.B=!1,this.A=new Leap.Matrix,this.Z=null,this.C=new Leap.Vector,this.N=new Leap.Vector,this.V=new Leap.Vector,this.O=new Leap.Vector,this.Q=new Leap.Vector,this.S=new Leap.Vector,this.R=null):(this.d=t,this.I=e.id,this.B=!0,this.A=new Leap.Matrix(e.r),this.Z=e.s,this.C=new Leap.Vector(e.t),this.N=new Leap.Vector(e.direction),this.V=new Leap.Vector(e.palmNormal),this.O=new Leap.Vector(e.palmPosition),this.Q=new Leap.Vector(e.palmVelocity),this.S=new Leap.Vector(e.sphereCenter),this.R=e.sphereRadius)},Leap.Hand.prototype={frame:function(){return this.d},id:function(){return this.I},direction:function(){return this.N},palmNormal:function(){return this.V},palmPosition:function(){return this.O},palmVelocity:function(){return this.Q},sphereCenter:function(){return this.S},sphereRadius:function(){return this.R},rotationAngle:function(e,t){if(!this.B||!e.B)return 0;var n=e.hand(this.I);if(!n.B)return 0;var r=this.rotationMatrix(e),i=(r.xBasis.x+r.yBasis.y+r.zBasis.z-1)*.5,s=Math.acos(i);return s===NaN?0:s},rotationAxis:function(e){if(!this.B||!e.B)return Leap.Vector.zero();var t=e.hand(this.I);if(!t.B)return Leap.Vector.zero();var n=this.A.zBasis.y-t.A.yBasis.z,r=this.A.xBasis.z-t.A.zBasis.x,i=this.A.yBasis.x-t.A.xBasis.y,s=new Leap.Vector([n,r,i]);return s.normalize()},rotationMatrix:function(e){if(!this.B||!e.B)return Leap.Matrix.identity();var t=e.hand(this.I);if(!t.B)return Leap.Matrix.identity();var n=new Leap.Vector([this.A.xBasis.x,this.A.yBasis.x,this.A.zBasis.x]),r=new Leap.Vector([this.A.xBasis.y,this.A.yBasis.y,this.A.zBasis.y]),i=new Leap.Vector([this.A.xBasis.z,this.A.yBasis.z,this.A.zBasis.z]),s=new Leap.Matrix([n,r,i]);return t.A.multiply(s)},scaleFactor:function(e){if(!this.B||!e.B)return 1;var t=e.hand(this.I);return t.B?Math.exp(this.Z-t.Z):1},translation:function(e){if(!this.valid||!e.valid)return Leap.Vector.zero();var t=e.hand(this.I);if(!t.B)return Leap.Vector.zero();var n=this.C.x-t.C.x,r=this.C.y-t.C.y,i=this.C.z-t.C.z;return new Leap.Vector([n,r,i])},finger:function(e){return this.J[e]==null?Leap.Finger.invalid():this.J[e]},fingers:function(){return this.L},pointable:function(e){return this.D[e]==null?Leap.Pointable.invalid():this.D[e]},pointables:function(){return this.G},tool:function(e){return this.K[e]==null?{isValid:!1}:this.K[e]},tools:function(){return this.X},toString:function(){var e="{id:"+obj.I+",sphereCenter:"+(obj.S==null?"null":obj.S)+",";e+="sphereRadius:"+(obj.R==null?"null":obj.R)+",",e+="normal:"+(obj.c==undefined?"null":obj.c.toString())+",fingers:[";for(var t=0;t<this.L.length;t++)e+=this.L[t].toString();e+="],tools:[";for(var t=0;t<this.X.length;t++)e+=this.X[t].toString();return e+="],palmNormal:"+(obj.V==undefined?"null":obj.V.toString())+",",e+="palmPosition:"+(obj.O==undefined?"null":obj.O.toString())+",",e+="palmVelocity:"+(obj.Q==undefined?"null":obj.Q.toString())+"}",e},isValid:function(){return this.B}},Leap.Hand.invalid=function(){return new Leap.Hand},Leap.HandList=function(){},Leap.HandList.prototype=new Array,Leap.HandList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Hand(e[i]))},Leap.HandList.prototype.count=function(){return this.length},Leap.HandList.prototype.empty=function(){return this.length>0},Leap.Listener=function(){this.onConnect=function(e){},this.onDisconnect=function(e){},this.onExit=function(e){},this.onFrame=function(e){},this.onInit=function(e){}},Leap.Matrix=function(e){e instanceof Leap.Matrix?(this.xBasis=new Leap.Vector(e.xBasis),this.yBasis=new Leap.Vector(e.yBasis),this.zBasis=new Leap.Vector(e.zBasis),this.origin=new Leap.Vector(e.origin)):e instanceof Array?e[0]instanceof Leap.Vector&&typeof e[1]=="number"?(this.setRotation(e[0],e[1]),this.origin=new Leap.Vector(e[2])):(this.xBasis=new Leap.Vector(e[0]),this.yBasis=new Leap.Vector(e[1]),this.zBasis=new Leap.Vector(e[2]),this.origin=new Leap.Vector(e[3])):(this.xBasis=new Leap.Vector([1,0,0]),this.yBasis=new Leap.Vector([0,1,0]),this.zBasis=new Leap.Vector([0,0,1]),this.origin=new Leap.Vector([0,0,0]))},Leap.Matrix.prototype={setRotation:function(e,t){var n=e.normalized(),r=Math.sin(t),i=Math.cos(t),s=1-i;this.xBasis=new Leap.Vector([n.x*n.x*s+i,n.x*n.y*s-n.z*r,n.x*n.z*s+n.y*r]),this.yBasis=new Leap.Vector([n.y*n.x*s+n.z*r,n.y*n.y*s+i,n.y*n.z*s-n.x*r]),this.zBasis=new Leap.Vector([n.z*n.x*s-n.y*r,n.z*n.y*s+n.x*r,n.z*n.z*s+i])},transformPoint:function(e){return this.origin.plus(this.transformDirection(e))},transformDirection:function(e){var t=this.xBasis.multiply(e.x),n=this.yBasis.multiply(e.y),r=this.zBasis.multiply(e.z);return t.plus(n).plus(r)},times:function(e){var t=this.transformDirection(e.xBasis),n=this.transformDirection(e.yBasis),r=this.transformDirection(e.zBasis),i=this.transformPoint(e.origin);return new Leap.Matrix([t,n,r,i])},rigidInverse:function(){var e=new Leap.Vector([this.xBasis.x,this.yBasis.x,this.zBasis.x]),t=new Leap.Vector([this.xBasis.y,this.yBasis.y,this.zBasis.y]),n=new Leap.Vector([this.xBasis.z,this.yBasis.z,this.zBasis.z]),r=new Leap.Matrix([e,t,n]);return r.origin=r.transformDirection(Leap.Vector.zero().minus(this.origin)),r},toArray3x3:function(e){return e==null?e=[]:e.length=0,e[0]=this.xBasis.x,e[1]=this.xBasis.y,e[2]=this.xBasis.z,e[3]=this.yBasis.x,e[4]=this.yBasis.y,e[5]=this.yBasis.z,e[6]=this.zBasis.x,e[7]=this.zBasis.y,e[8]=this.zBasis.z,e},toArray4x4:function(e){return e==null?e=[]:e.length=0,e[0]=this.xBasis.x,e[1]=this.xBasis.y,e[2]=this.xBasis.z,e[3]=0,e[4]=this.yBasis.x,e[5]=this.yBasis.y,e[6]=this.yBasis.z,e[7]=0,e[8]=this.zBasis.x,e[9]=this.zBasis.y,e[10]=this.zBasis.z,e[11]=0,e[12]=this.origin.x,e[13]=this.origin.y,e[14]=this.origin.z,e[15]=1,e},toString:function(){return"{xBasis:"+this.xBasis+",yBasis:"+this.yBasis+",zBasis:"+this.zBasis+",origin:"+this.origin+"}"},compare:function(e){return this.xBasis.compare(e.xBasis)&&this.yBasis.compare(e.yBasis)&&this.zBasis.compare(e.zBasis)&&this.origin.compare(e.origin)}},Leap.Matrix.identity=function(){return new Leap.Matrix},Leap.Plane=function(e,t,n){this.M=new Leap.Vector(e),this.k=new Leap.Vector(t),this.m=new Leap.Vector(n)},Leap.Plane.prototype={normal:function(){var e=this.k.x-this.M.x,t=this.k.y-this.M.y,n=this.k.z-this.M.z,r=this.m.x-this.M.x,i=this.m.y-this.M.y,s=this.m.z-this.M.z,o=t*s-i*n,u=e*s-r*n,a=e*i-r*t;return o==0&&u==0&&a==0?this.c=null:this.c=new Leap.Vector([o,u,a]),this.normal=function(){return this.c},this.c},unitnormal:function(){var e=this.normal();return n==null?null:(this.h=n.normalized(),this.unitnormal=function(){return this.h},this.h)},pointIntersect:function(e){var t=this.unitnormal(),n=t.dot(this.M.minus(e)),r=t.multiply(n).plus(e);return{position:r,distance:n}},pointDistance:function(e){var t=this.unitnormal(),n=t.dot(this.M.minus(e));return n},rayIntersect:function(e,t){var n=t.dot(this.normal());if(n==0)return null;var r=this.M.minus(e).dot(this.normal()),i=r/n,s=e.plus(t.multiply(i)),o=i*t.magnitude();return{position:s,distance:o}}},Leap.Pointable=function(e,t,n){n==null&&(n=this),e==null?(n.d=null,n.AC=null,n.I=null,n.B=!1,n.N=new Leap.Vector,n.a=new Leap.Vector,n.Y=new Leap.Vector,n.l=null,n.o=null):(n.d=t?t.d:null,n.AC=t,n.I=e.id,n.B=!0,n.N=new Leap.Vector(e.direction),n.a=new Leap.Vector(e.tipPosition),n.Y=new Leap.Vector(e.tipVelocity),n.l=e.length,n.o=e.width)},Leap.Pointable.prototype={frame:function(){return this.d},hand:function(){return this.AC},id:function(){return this.I},direction:function(){return this.N},tipPosition:function(){return this.a},tipVelocity:function(){return this.Y},length:function(){return this.l},width:function(){return this.o},toString:function(){var e="{id:"+this.I+",direction:"+this.N.toString()+",";return e+="tipPosition:"+this.a.toString()+",",e+="tipVelocity:"+this.Y.toString()+",",e+="length:"+this.l+",",e+="width:"+this.o+"}",e},isValid:function(){return this.B}},Leap.Pointable.invalid=function(){return new Leap.Pointable},Leap.Finger=function(e,t){Leap.Pointable(e,t,this),this.AA=!0,this.AF=!1},Leap.Finger.prototype=Leap.Pointable.prototype,Leap.Finger.invalid=function(){return new Leap.Finger},Leap.Tool=function(e,t){Leap.Pointable(e,t,this),this.AF=!0,this.AA=!1},Leap.Tool.prototype=Leap.Pointable.prototype,Leap.Tool.invalid=function(){return new Leap.Tool},Leap.PointableList=function(){},Leap.PointableList.prototype=new Array,Leap.PointableList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Pointable(e[i]))},Leap.PointableList.prototype.count=function(){return this.length},Leap.PointableList.prototype.empty=function(){return this.length>0},Leap.FingerList=function(){},Leap.FingerList.prototype=new Array,Leap.FingerList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Finger(e[i]))},Leap.FingerList.prototype.count=function(){return this.length},Leap.FingerList.prototype.empty=function(){return this.length>0},Leap.ToolList=function(){},Leap.ToolList.prototype=new Array,Leap.ToolList.prototype.append=function(e){for(i=0;i<e.length;i++)this.push(new Leap.Tool(e[i]))},Leap.ToolList.prototype.count=function(){return this.length},Leap.ToolList.prototype.empty=function(){return this.length>0},Leap.Screen=function(e){if(e){this.j=new Leap.Plane(e[0],e[1],e[2]),this.AE=e[0].plus(e[2]).dividedBy(2),this.AD=e[1].plus(e[1].minus(this.AE));var t=e[2].minus(e[0]),n=e[0].minus(e[1]),r=2*t.magnitude()/document.width,i=4*n.magnitude()/document.height;this.AG=t.normalized().dividedBy(r),this.AH=n.normalized().dividedBy(i),this.B=!0}else this.j=null,this.B=!1},Leap.Screen.prototype={distanceToPoint:function(e){return this.j.pointDistance(e)},intersect:function(e,t,n){var r=this.j.rayIntersect(e.tipPosition(),e.direction());if(t){var i=r.position.minus(this.AD),s=this.AG.dot(i),o=this.AH.dot(i);r.position=new Leap.Vector([s,o,0])}return r},normal:function(){return this.j.normal()},isValid:function(){return this.B}},Leap.Screen.invalid=function(){return new Leap.Screen},Leap.ScreenList=function(){},Leap.ScreenList.prototype=new Array,Leap.ScreenList.prototype.count=function(){return this.length},Leap.ScreenList.prototype.empty=function(){return this.length>0},Leap.ScreenList.prototype.closestScreenHit=function(e){if(this.length<1)return Leap.Screen.invalid();var t=this[0],n=t.intersect(e).distance;for(var r=1;r<this.length;r++){var i=this[r].intersect(e).distance;i<n&&(t=this[r],n=i)}return t},Leap.Vector=function(e){e instanceof Leap.Vector?(this.x=e.x,this.y=e.y,this.z=e.z):e!=null?(this.x=typeof e[0]=="number"?e[0]:0,this.y=typeof e[1]=="number"?e[1]:0,this.z=typeof e[2]=="number"?e[2]:0):(this.x=0,this.y=0,this.z=0)},Leap.Vector.prototype={angleTo:function(e){var t=this.magnitude()*e.magnitude();return t>0?Math.acos(this.dot(e)/t):0},cross:function(e){var t=this.y*e.z-e.y*this.z,n=this.x*e.z-e.x*this.z,r=this.x*e.y-e.x*this.y;return new Leap.Vector([t,n,r])},distanceTo:function(e){return this.minus(e).magnitude()},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},plus:function(e){return new Leap.Vector([this.x+e.x,this.y+e.y,this.z+e.z])},minus:function(e){return new Leap.Vector([this.x-e.x,this.y-e.y,this.z-e.z])},multiply:function(e){return new Leap.Vector([this.x*e,this.y*e,this.z*e])},dividedBy:function(e){return new Leap.Vector([this.x/e,this.y/e,this.z/e])},magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){return Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2)},normalized:function(){var e=this.magnitude();return e>0?this.dividedBy(e):new Leap.Vector},pitch:function(){return Math.atan2(this.y,-this.z)},roll:function(){return Math.atan2(this.x,-this.y)},yaw:function(){return Math.atan2(this.x,-this.z)},toArray:function(){return[this.x,this.y,this.z]},toString:function(){return"{x:"+this.x+",y:"+this.y+",z:"+this.z+"}"},compare:function(e){return this.x==e.x&&this.y==e.y&&this.z==e.z},isValid:function(){return this.x!=NaN&&this.x>-Infinity&&this.x<Infinity&&this.y!=NaN&&this.y>-Infinity&&this.y<Infinity&&this.z!=NaN&&this.z>-Infinity&&this.z<Infinity}},Leap.Vector.backward=function(){return new Leap.Vector([0,0,1])},Leap.Vector.down=function(){return new Leap.Vector([0,-1,0])},Leap.Vector.forward=function(){return new Leap.Vector([0,0,-1])},Leap.Vector.left=function(){return new Leap.Vector([-1,0,0])},Leap.Vector.right=function(){return new Leap.Vector([1,0,0])},Leap.Vector.up=function(){return new Leap.Vector([0,1,0])},Leap.Vector.xAxis=function(){return new Leap.Vector([1,0,0])},Leap.Vector.yAxis=function(){return new Leap.Vector([0,1,0])},Leap.Vector.zAxis=function(){return new Leap.Vector([0,0,1])},Leap.Vector.zero=function(){return new Leap.Vector([0,0,0])};